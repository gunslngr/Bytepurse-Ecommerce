<%- include('layouts/header.ejs') %>
<%- include("layouts/navbar.ejs") %>


    <!-- Breadcrumb Section Begin -->
    <div class="breacrumb-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb-text">
                        <a href="#"><i class="fa fa-home"></i> Home</a>
                        <span>Register</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Breadcrumb Form Section Begin -->

    <!-- Register Section Begin -->
    <div class="register-login-section spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 offset-lg-3">
                    <div class="register-form">
                        <h2>Register</h2>
                        <% if(typeof errMessage !=='undefined' ){ %>
                            <h5 style="color: red" class="text-center mt-3">
                                <%= errMessage %>
                            </h5>
                            <% } %>
                                <% if(typeof succMessage !=='undefined' ){ %>
                                    <p style="color: green" class="text-center mt-3">
                                        <%= succMessage %>
                                    </p>
                                    <% } %>

                                        <form action="/register" method="post">
                                            <div class="group-input">
                                                <input type="text" name="fname" id="fname"
                                                    placeholder="Enter First Name" required>
                                            </div>
                                            <div class="group-input">
                                                <input type="text" name="lname" id="lname" placeholder="Enter last Name"
                                                    required>
                                            </div>
                                            <div class="group-input">
                                                <input type="email" name="email" id="email" placeholder="Enter Email"
                                                    required>
                                            </div>
                                            <div class="group-input">
                                                <input type="text" name="mobile" id="mobile" placeholder="Enter Mobile"
                                                    required>
                                            </div>
                                            <div class="group-input">
                                                <input type="password" name="password" id="password"
                                                    placeholder="Enter Password" required>
                                            </div>
                                            <div class="group-input">
                                                <input type="password" name="confirmpassword" id="cpassword"
                                                    placeholder="Confirm Password" required>
                                            </div>
                                            <input type="submit" class="site-btn register-btn" value="register">
                                        </form>
                                        <div class="switch-login">
                                            <a href="/login" class="or-login">Or Login</a>
                                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Register Form Section End -->

    <script>
        const fnameInput = document.getElementById("fname");
        fnameInput.addEventListener("input", () => {
            let fname = fnameInput.value.trim();
            if (!/^[A-Za-z]+$/.test(fname)) {
                fnameInput.setCustomValidity("First name should only contain alphabetical characters");
            } else {
                fnameInput.setCustomValidity("");
            }
        });

        const lnameInput = document.getElementById("lname");
        lnameInput.addEventListener("input", () => {
            let lname = lnameInput.value.trim();
            if (!/^[A-Za-z]+$/.test(lname)) {
                lnameInput.setCustomValidity("Last name should only contain alphabetical characters");
            } else {
                lnameInput.setCustomValidity("");
            }
        });
        // const fnameInput = document.getElementById("fname");
        // fnameInput.addEventListener("input", () => {
        //     let fname = fnameInput.value.trim();
        //     if (fname === "") {
        //         fnameInput.setCustomValidity("First name cannot be null");
        //     } else {
        //         fnameInput.setCustomValidity("");
        //     }
        // });

        // const lnameInput = document.getElementById("lname");
        // lnameInput.addEventListener("input", () => {
        //     let lname = lnameInput.value.trim();
        //     if (lname === "") {
        //         lnameInput.setCustomValidity("First name cannot be null");
        //     } else {
        //         lnameInput.setCustomValidity("");
        //     }
        // });
        const emailInput = document.getElementById("email");
        emailInput.addEventListener("input", () => {
            let email = emailInput.value.trim();
            if (email === "") {
                emailInput.setCustomValidity("Email cannot be null");
            } else {
                emailInput.setCustomValidity("");
            }
        });

        const mobileInput = document.getElementById("mobile");
        mobileInput.addEventListener("input", () => {
            let mobile = mobileInput.value.trim();

            // Regular expression pattern for a 10-digit mobile number
            const mobileNumberPattern = /^\d{10}$/;

            if (!mobileNumberPattern.test(mobile)) {
                mobileInput.setCustomValidity("Invalid phone number");
            } else {
                mobileInput.setCustomValidity("");
            }
        });

        const passwordInput = document.getElementById("password");

        passwordInput.addEventListener("input", () => {
    const password = passwordInput.value;

    if (password.length < 8) {
        passwordInput.setCustomValidity("Password is too short");
    } else if (!/[a-z]/.test(password) || !/[A-Z]/.test(password) || !/[0-9]/.test(password) || !/[!@#$%^&*]/.test(password)) {
        passwordInput.setCustomValidity("Password must include lowercase, uppercase, number, and special character");
    } else if (password.includes("password")) {
        passwordInput.setCustomValidity("Avoid using common words like 'password'");
    } else {
        passwordInput.setCustomValidity("");
    }
});

        const cpasswordInput = document.getElementById("cpassword");
        const ogPasswordInput = document.getElementById("password");

        cpasswordInput.addEventListener("input", () => {
            const cpassword = cpasswordInput.value.trim();
            const password = ogPasswordInput.value.trim();

            if (cpassword !== password) {
                cpasswordInput.setCustomValidity("Password doesn't match");
            } else {
                cpasswordInput.setCustomValidity("");
            }
        });
    </script>


    <%- include('layouts/footer.ejs') %>